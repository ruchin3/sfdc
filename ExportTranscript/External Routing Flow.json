{
  "Version": "2019-10-30",
  "StartAction": "f096d844-7043-459c-b533-c4aa102f35e6",
  "Metadata": {
    "entryPointPosition": {
      "x": -1412.8,
      "y": -499.2
    },
    "ActionMetadata": {
      "f096d844-7043-459c-b533-c4aa102f35e6": {
        "position": {
          "x": -1242.4,
          "y": -499.2
        }
      },
      "a2fa0a76-f599-4a55-bf44-84739082f781": {
        "position": {
          "x": -945.6,
          "y": -461.6
        },
        "parameters": {
          "Name": {
            "useDynamic": true
          },
          "ContactFlowId": {
            "displayName": "External Routing Reporting Flow"
          }
        },
        "ContactFlow": {
          "text": "External Routing Reporting Flow"
        }
      },
      "bf9c1a62-87c1-4eb2-b807-20616d41301c": {
        "position": {
          "x": -103.2,
          "y": 176
        }
      },
      "4f325727-209b-405d-b37f-6e6c3a369e64": {
        "position": {
          "x": -429.6,
          "y": 199.2
        },
        "parameters": {
          "TimeLimitSeconds": {
            "unit": 1
          }
        },
        "timeoutUnit": {
          "display": "Seconds",
          "value": "second"
        }
      },
      "e6b7afe0-dbef-4f9b-a674-6e11fe865053": {
        "position": {
          "x": -636,
          "y": -416
        },
        "parameters": {
          "Attributes": {
            "ReportingTaskId": {
              "useDynamic": true
            }
          }
        },
        "dynamicParams": [
          "ReportingTaskId"
        ]
      },
      "895ec250-8c9d-4982-8e82-f22332f18ae5": {
        "position": {
          "x": 171.2,
          "y": -209.6
        }
      },
      "a92b5f99-464c-434d-9149-feec11affc10": {
        "position": {
          "x": -72.8,
          "y": -276.8
        },
        "parameters": {
          "LambdaFunctionARN": {
            "displayName": "CreateAgentWorkV1"
          },
          "LambdaInvocationAttributes": {
            "ReportingTaskId": {
              "useDynamic": true
            }
          }
        },
        "dynamicMetadata": {
          "ReportingTaskId": true
        }
      },
      "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d": {
        "position": {
          "x": -360.8,
          "y": -263.2
        },
        "parameters": {
          "QueueId": {
            "displayName": "SCCAC-BasicQueue-0000000000000"
          }
        },
        "queue": {
          "text": "SCCAC-BasicQueue-04vJ1000000oLnEIAU",
          "id": "arn:aws:connect:ap-southeast-2:0000000000000:instance/0000000-1abb-4b56-aab5-0000000000000/queue/0000000-2c54-4533-8c39-8d28e7dbb6c3"
        }
      }
    },
    "Annotations": [],
    "name": "External Routing Flow",
    "description": "",
    "type": "contactFlow",
    "status": "PUBLISHED",
    "hash": {}
  },
  "Actions": [
    {
      "Parameters": {
        "FlowLoggingBehavior": "Enabled"
      },
      "Identifier": "f096d844-7043-459c-b533-c4aa102f35e6",
      "Type": "UpdateFlowLoggingBehavior",
      "Transitions": {
        "NextAction": "a2fa0a76-f599-4a55-bf44-84739082f781"
      }
    },
    {
      "Parameters": {
        "Name": "$.ContactId",
        "ContactFlowId": "arn:aws:connect:ap-southeast-2:0000000000000:instance/000000-1abb-4b56-aab5-0000000000000/contact-flow/0000000-590e-4b2e-a44f-e5bcc5672526"
      },
      "Identifier": "a2fa0a76-f599-4a55-bf44-84739082f781",
      "Type": "CreateTask",
      "Transitions": {
        "NextAction": "e6b7afe0-dbef-4f9b-a674-6e11fe865053",
        "Errors": [
          {
            "NextAction": "e6b7afe0-dbef-4f9b-a674-6e11fe865053",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "LoopCount": "10"
      },
      "Identifier": "bf9c1a62-87c1-4eb2-b807-20616d41301c",
      "Type": "Loop",
      "Transitions": {
        "NextAction": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
        "Conditions": [
          {
            "NextAction": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "ContinueLooping"
              ]
            }
          },
          {
            "NextAction": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "DoneLooping"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "TimeLimitSeconds": "10"
      },
      "Identifier": "4f325727-209b-405d-b37f-6e6c3a369e64",
      "Type": "Wait",
      "Transitions": {
        "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
        "Conditions": [
          {
            "NextAction": "bf9c1a62-87c1-4eb2-b807-20616d41301c",
            "Condition": {
              "Operator": "Equals",
              "Operands": [
                "WaitCompleted"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "Attributes": {
          "ReportingTaskId": "$.Task.ContactId"
        },
        "TargetContact": "Current"
      },
      "Identifier": "e6b7afe0-dbef-4f9b-a674-6e11fe865053",
      "Type": "UpdateContactAttributes",
      "Transitions": {
        "NextAction": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
        "Errors": [
          {
            "NextAction": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {},
      "Identifier": "895ec250-8c9d-4982-8e82-f22332f18ae5",
      "Type": "DisconnectParticipant",
      "Transitions": {}
    },
    {
      "Parameters": {
        "LambdaFunctionARN": "arn:aws:lambda:ap-southeast-2:0000000000000:function:CreateAgentWorkV1",
        "InvocationTimeLimitSeconds": "8",
        "InvocationType": "SYNCHRONOUS",
        "LambdaInvocationAttributes": {
          "ReportingTaskId": "$.Attributes.ReportingTaskId"
        },
        "ResponseValidation": {
          "ResponseType": "STRING_MAP"
        }
      },
      "Identifier": "a92b5f99-464c-434d-9149-feec11affc10",
      "Type": "InvokeLambdaFunction",
      "Transitions": {
        "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
        "Errors": [
          {
            "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    },
    {
      "Parameters": {
        "MetricType": "NumberOfAgentsAvailable",
        "QueueId": "arn:aws:connect:ap-southeast-2:0000000000000:instance/0000000-1abb-4b56-aab5-0000000000000/queue/00000000-2c54-4533-8c39-0000000000000"
      },
      "Identifier": "a9abecbb-2cb9-45d2-8d5b-f9f2da8b459d",
      "Type": "CheckMetricData",
      "Transitions": {
        "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
        "Conditions": [
          {
            "NextAction": "a92b5f99-464c-434d-9149-feec11affc10",
            "Condition": {
              "Operator": "NumberGreaterThan",
              "Operands": [
                "0"
              ]
            }
          }
        ],
        "Errors": [
          {
            "NextAction": "4f325727-209b-405d-b37f-6e6c3a369e64",
            "ErrorType": "NoMatchingCondition"
          },
          {
            "NextAction": "895ec250-8c9d-4982-8e82-f22332f18ae5",
            "ErrorType": "NoMatchingError"
          }
        ]
      }
    }
  ]
}
